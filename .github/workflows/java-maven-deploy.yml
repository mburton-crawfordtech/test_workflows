name: Java CI with Maven - deploy

on:
  workflow_call:

jobs:
  deploy:
    runs-on: ubuntu-latest

    # permissions:
    #   contents: read
    #   packages: write

    steps:
      # checkout the code 
    - name: Checkout Code
      uses: actions/checkout@v3

    - name: Run custom build action
      uses: mburton-crawfordtech/test_workflows/java-maven-build-action@main
      
    - name: Publish to GitHub Packages Apache Maven
      run: mvn deploy -s $GITHUB_WORKSPACE/settings.xml
      env:
        GITHUB_TOKEN: ${{ github.token }}
